### 堆栈
简单来说 栈里面存放的是**基本的数据类型和引用**，堆里面则是存放**各种对象实例**的。

#### 堆与栈分开设计是为什么呢？

栈存储了处理逻辑、堆存储了具体的数据，这样隔离设计更为清晰
堆与栈分离，使得堆可以被多个栈共享。
栈保存了上下文的信息，因此只能向上增长；而堆是动态分配

#### 栈区
线程私有，生命周期与线程相同。每个方法执行的时候都会创建一个栈帧（stack frame）用于存放 局部变量表、操作栈、动态链接、方法出口。

#### 堆
存放对象实例，所有的对象的内存都在这里分配。垃圾回收主要就是作用于这里的。

堆得内存由-Xms指定，默认是物理内存的1/64；最大的内存由-Xmx指定，默认是物理内存的1/4。
默认空余的堆内存小于40%时，就会增大，直到-Xmx设置的内存。具体的比例可以由-XX:MinHeapFreeRatio指定
空余的内存大于70%时，就会减少内存，直到-Xms设置的大小。具体由-XX:MaxHeapFreeRatio指定。
因此一般都建议把这两个参数设置成一样大，可以避免JVM在不断调整大小。

#### 程序计数器
这里记录了线程执行的字节码的行号，在分支、循环、跳转、异常、线程恢复等都依赖这个计数器。

#### 方法区
类型信息、字段信息、方法信息、其他信息

### 总结

名称	特征	作用	配置	异常
栈区	线程私有，使用一段连续的内存空间	存放局部变量表、操作栈、动态链接、方法出口	-XSs	StackOverflowError OutOfMemoryError
堆	线程共享，生命周期与虚拟机相同	保存对象实例	-Xms -Xmx -Xmn	OutOfMemoryError
程序计数器	线程私有、占用内存小	字节码行号	无	无
方法区	线程共享	存储类加载信息、常量、静态变量等	-XX:PermSize -XX:MaxPermSize	OutOfMemoryError
